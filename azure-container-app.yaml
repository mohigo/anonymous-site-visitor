name: fusion-leap-digital
location: eastus
identity:
  type: SystemAssigned
properties:
  managedEnvironmentId: /subscriptions/7ef4086a-c9b4-4955-9745-eff6f1f4b80b/resourceGroups/fusion-leap-digital/providers/Microsoft.App/managedEnvironments/fusion-leap-env
  configuration:
    ingress:
      external: true
      targetPort: 3000
    secrets:
      - name: mongodb-uri
        value: mongodb://your-mongodb-connection-string
  template:
    containers:
      - name: fusion-leap-digital
        image: fusionleapdigital.azurecr.io/fusion-leap-digital:latest
        env:
          - name: NODE_ENV
            value: production
          - name: PORT
            value: "3000"
          - name: MONGODB_URI
            secretRef: mongodb-uri
        resources:
          cpu: 0.5
          memory: 1Gi
    scale:
      minReplicas: 1
      maxReplicas: 3 